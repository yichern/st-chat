{"version":3,"sources":["stChat.tsx","index.tsx"],"names":["refreshStreamlitAndCreateNode","character","Streamlit","setFrameHeight","document","createTextNode","MessageContainer","props","theme","value","animateFrom","useTypewriter","partialReplies","generationComplete","StyledDiv","styled","div","display","background","secondaryBackgroundColor","border","borderRadius","padding","margin","maxWidth","whiteSpace","split","join","options","delay","cursor","onCreateTextNode","onInit","typewriter","typeString","callFunction","state","setTimeout","elements","setAttribute","setComponentValue","start","withStreamlitConnection","useEffect","avatarUrl","args","isUser","avatarStyle","seed","startsWith","Avatar","img","height","width","ChatContainer","fontFamily","font","css","src","alt","draggable","ReactDOM","render","StrictMode","getElementById"],"mappings":"iRAYMA,EAAgC,SAACC,GAErC,OADAC,IAAUC,iBACHC,SAASC,eAAeJ,IAG3BK,EAAmB,SAACC,GACxB,IAAQC,EAAiFD,EAAjFC,MAAOC,EAA0EF,EAA1EE,MAAOC,EAAmEH,EAAnEG,YAAaC,EAAsDJ,EAAtDI,cAAeC,EAAuCL,EAAvCK,eAAgBC,EAAuBN,EAAvBM,mBAC5DC,EAAYC,IAAOC,IAAI,CAC3BC,QAAS,eACTC,WAAYV,EAAMW,yBAClBC,OAAQ,wBACRC,aAAc,OACdC,QAAS,YACTC,OAAQ,WACRC,SAAU,MACVC,WAAY,aAEd,OAAId,GAAiBF,EAAMiB,MAAMhB,GAAaiB,KAAK,IAE/C,kBAACb,EAAD,KACE,8BAAOJ,GACP,kBAAC,IAAD,CACEkB,QAAS,CACPC,MAAO,GACPC,OAAQ,SACRC,iBAAkB/B,GAEpBgC,OAAQ,SAAAC,GACNA,EACGC,WACCzB,EAAMiB,MAAMhB,GAAaiB,KAAK,KAE/BQ,cAAa,SAAAC,GACRvB,GACFwB,YAAW,kBAAMD,EAAME,SAASR,OAAOS,aAAa,SAAU,YAAW,KAEvE3B,GACFV,IAAUsC,mBAAkB,MAG/BC,YAQT,kBAAC3B,EAAD,KACGL,IA2FMiC,eArFF,SAACnC,GACZoC,qBAAU,WACNzC,IAAUC,oBAGd,IAEIyC,EAFJ,EAA6GrC,EAAMsC,KAA3GC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,YAAaC,EAA7B,EAA6BA,KAAMtC,EAAnC,EAAmCA,YAAaD,EAAhD,EAAgDA,MAAOE,EAAvD,EAAuDA,cAAeC,EAAtE,EAAsEA,eAAgBC,EAAtF,EAAsFA,mBAIpF+B,EADEG,EAAYE,WAAW,UAEhBF,EAAYE,WAAW,cADpBF,EAIH,2CAAuCA,EAAvC,YAAsDC,EAAtD,QAMX,IAAQxC,EAAUD,EAAVC,MAGR,IAAKA,EACH,OAAO,oFAIT,IAAM0C,EAASnC,IAAOoC,IAAI,CACxB/B,OAAO,wBAEPgC,OAAQ,OACRC,MAAO,OACP9B,OAAQ,IAIJ+B,EAAgBvC,IAAOC,IAAI,CAC/BC,QAAS,OAETsC,WAAW,GAAD,OAAK/C,EAAMgD,KAAX,sCACVJ,OAAQ,OACR7B,OAAQ,EACR8B,MAAO,SAET,SAAC9C,GACC,OAAIA,EAAMuC,OACDW,YAAP,iKAQKA,YAAP,2FAYF,OAUI,kBAACH,EAAD,CAAeR,OAAQA,GACrB,kBAACI,EAAD,CAAQQ,IAAKd,EAAWe,IAAI,UAAUC,UAAU,UAChD,kBAAC,EAAD,CAAkBpD,MAAOA,EAAOC,MAAOA,EAAOC,YAAaA,EAAaC,cAAeA,EAAeC,eAAgBA,EAAgBC,mBAAoBA,QC7IlKgD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF3D,SAAS4D,eAAe,W","file":"static/js/main.25cb62a4.chunk.js","sourcesContent":["import {\n  // eslint-disable-next-line \n  Streamlit,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ComponentProps, useEffect } from \"react\"\nimport styled from '@emotion/styled'\nimport { css } from '@emotion/react'\nimport Typewriter from 'typewriter-effect'\n\n\n// custom callback to refresh streamlit on every character typed\nconst refreshStreamlitAndCreateNode = (character: string) => {\n  Streamlit.setFrameHeight();\n  return document.createTextNode(character)\n}\n\nconst MessageContainer = (props: ComponentProps<any>) => {\n  const { theme, value, animateFrom, useTypewriter, partialReplies, generationComplete } = props\n  const StyledDiv = styled.div({\n    display: 'inline-block',\n    background: theme.secondaryBackgroundColor,\n    border: '1px solid transparent',\n    borderRadius: '10px',\n    padding: '10px 14px',\n    margin: '5px 20px',\n    maxWidth: '70%',\n    whiteSpace: 'pre-wrap',\n  })\n  if (useTypewriter && value.split(animateFrom).join('')) {\n    return (\n      <StyledDiv>\n        <span>{animateFrom}</span>\n        <Typewriter\n          options={{\n            delay: 10,\n            cursor: 'â–Ž',\n            onCreateTextNode: refreshStreamlitAndCreateNode\n          }}\n          onInit={typewriter => {\n            typewriter\n              .typeString(\n                value.split(animateFrom).join('')\n              )\n              .callFunction(state => {\n                if (generationComplete) {\n                  setTimeout(() => state.elements.cursor.setAttribute('hidden', 'hidden'), 3000)\n                }\n                if (partialReplies) {\n                  Streamlit.setComponentValue(false)\n                }\n              })\n              .start()\n          }}\n        >\n        </Typewriter>\n      </StyledDiv>\n    )\n  } else {\n    return (\n      <StyledDiv>\n        {value}\n      </StyledDiv>\n    )\n  }\n}\n\nconst Chat = (props: ComponentProps<any>) => {\n  useEffect(() => {\n      Streamlit.setFrameHeight()\n    }\n  );\n  const { isUser, avatarStyle, seed, animateFrom, value, useTypewriter, partialReplies, generationComplete } = props.args\n\n  let avatarUrl\n  if (avatarStyle.startsWith(\"https\")) {\n    avatarUrl = avatarStyle\n  } else if (avatarStyle.startsWith(\"data:image\")) {\n    avatarUrl = avatarStyle\n  } else {\n    avatarUrl = `https://avatars.dicebear.com/api/${avatarStyle}/${seed}.svg`\n  }\n\n  // Streamlit sends us a theme object via props that we can use to ensure\n  // that our component has visuals that match the active theme in a\n  // streamlit app.\n  const { theme } = props\n  // Maintain compatibility with older versions of Streamlit that don't send\n  // a theme object.\n  if (!theme) {\n    return <div>Theme is undefined, please check streamlit version.</div>\n  }\n\n  // styles for the avatar image\n  const Avatar = styled.img({\n    border: `1px solid transparent`,\n    // borderRadius: '50%',\n    height: '3rem',\n    width: '3rem',\n    margin: 0,\n  })\n\n  // styles for the container\n  const ChatContainer = styled.div({\n    display: 'flex',\n    // flexDirection: 'row',\n    fontFamily: `${theme.font}, 'Segoe UI', 'Roboto', sans-serif`, \n    height: 'auto',\n    margin: 0,\n    width: '100%'\n  }, \n  (props: {isUser: boolean}) => {  // specific styles\n    if (props.isUser){\n      return css`\n        flex-direction: row-reverse;\n        & > div {\n          text-align: right;\n        }\n        padding-right: 5px;\n      `\n    }\n    return css`\n      .Typewriter {\n        display: inline;\n      }\n    `\n  })\n  \n  // custom callback to refresh streamlit on every character typed\n  const refreshStreamlitAndCreateNode = (character: string) => {\n    Streamlit.setFrameHeight()\n    return document.createTextNode(character)\n  }\n  if (!isUser) {\n    return (\n      <ChatContainer isUser={isUser}>\n        <Avatar src={avatarUrl} alt=\"profile\" draggable=\"false\"/>\n        <MessageContainer theme={theme} value={value} animateFrom={animateFrom} useTypewriter={useTypewriter} partialReplies={partialReplies} generationComplete={generationComplete}>\n        </MessageContainer>\n      </ChatContainer>\n    )\n  } else {\n    return (\n      <ChatContainer isUser={isUser}>\n        <Avatar src={avatarUrl} alt=\"profile\" draggable=\"false\"/>\n        <MessageContainer theme={theme} value={value} animateFrom={animateFrom} useTypewriter={useTypewriter} partialReplies={partialReplies} generationComplete={generationComplete}>\n        </MessageContainer>\n      </ChatContainer>\n    )\n  }\n} \n\nexport default withStreamlitConnection(Chat);\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Chat from \"./stChat\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Chat />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}