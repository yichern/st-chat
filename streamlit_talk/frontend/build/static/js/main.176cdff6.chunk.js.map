{"version":3,"sources":["stChat.tsx","index.tsx"],"names":["refreshStreamlitAndCreateNode","character","Streamlit","setFrameHeight","document","createTextNode","MessageContainer","props","theme","value","animateFrom","useTypewriter","partialReplies","StyledDiv","styled","div","display","background","secondaryBackgroundColor","border","borderRadius","padding","margin","maxWidth","whiteSpace","options","delay","cursor","onCreateTextNode","onInit","typewriter","typeString","split","join","callFunction","state","setTimeout","elements","setAttribute","setComponentValue","start","withStreamlitConnection","useEffect","avatarUrl","args","isUser","avatarStyle","seed","startsWith","Avatar","img","height","width","ChatContainer","fontFamily","font","css","src","alt","draggable","ReactDOM","render","StrictMode","getElementById"],"mappings":"iRAYMA,EAAgC,SAACC,GAErC,OADAC,IAAUC,iBACHC,SAASC,eAAeJ,IAG3BK,EAAmB,SAACC,GACxB,IAAQC,EAA6DD,EAA7DC,MAAOC,EAAsDF,EAAtDE,MAAOC,EAA+CH,EAA/CG,YAAaC,EAAkCJ,EAAlCI,cAAeC,EAAmBL,EAAnBK,eAC5CC,EAAYC,IAAOC,IAAI,CAC3BC,QAAS,eACTC,WAAYT,EAAMU,yBAClBC,OAAQ,wBACRC,aAAc,OACdC,QAAS,YACTC,OAAQ,WACRC,SAAU,MACVC,WAAY,aAEd,OAAIb,EAEA,kBAACE,EAAD,KACE,8BAAOH,GACP,kBAAC,IAAD,CACEe,QAAS,CACPC,MAAO,GACPC,OAAQ,SACRC,iBAAkB5B,GAEpB6B,OAAQ,SAAAC,GACNA,EACGC,WACCtB,EAAMuB,MAAMtB,GAAauB,KAAK,KAE/BC,cAAa,SAAAC,GACZC,YAAW,kBAAMD,EAAME,SAASV,OAAOW,aAAa,SAAU,YAAW,MACrE1B,GACFV,IAAUqC,mBAAkB,MAG/BC,YAQT,kBAAC3B,EAAD,KACGJ,IA2FMgC,eArFF,SAAClC,GACZmC,qBAAU,WACNxC,IAAUC,oBAGd,IAEIwC,EAFJ,EAAyFpC,EAAMqC,KAAvFC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,YAAaC,EAA7B,EAA6BA,KAAMrC,EAAnC,EAAmCA,YAAaD,EAAhD,EAAgDA,MAAOE,EAAvD,EAAuDA,cAAeC,EAAtE,EAAsEA,eAIpE+B,EADEG,EAAYE,WAAW,UAEhBF,EAAYE,WAAW,cADpBF,EAIH,2CAAuCA,EAAvC,YAAsDC,EAAtD,QAMX,IAAQvC,EAAUD,EAAVC,MAGR,IAAKA,EACH,OAAO,oFAIT,IAAMyC,EAASnC,IAAOoC,IAAI,CACxB/B,OAAO,wBAEPgC,OAAQ,OACRC,MAAO,OACP9B,OAAQ,IAIJ+B,EAAgBvC,IAAOC,IAAI,CAC/BC,QAAS,OAETsC,WAAW,GAAD,OAAK9C,EAAM+C,KAAX,sCACVJ,OAAQ,OACR7B,OAAQ,EACR8B,MAAO,SAET,SAAC7C,GACC,OAAIA,EAAMsC,OACDW,YAAP,iKAQKA,YAAP,2FAYF,OAAKX,EAUD,kBAACQ,EAAD,CAAeR,OAAQA,GACrB,kBAACI,EAAD,CAAQQ,IAAKd,EAAWe,IAAI,UAAUC,UAAU,UAChD,kBAAC,EAAD,CAAkBnD,MAAOA,EAAOC,MAAOA,EAAOC,YAAaA,KAV7D,kBAAC2C,EAAD,CAAeR,OAAQA,GACrB,kBAACI,EAAD,CAAQQ,IAAKd,EAAWe,IAAI,UAAUC,UAAU,UAChD,kBAAC,EAAD,CAAkBnD,MAAOA,EAAOC,MAAOA,EAAOC,YAAaA,EAAaC,cAAeA,EAAeC,eAAgBA,QCnI9HgD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF1D,SAAS2D,eAAe,W","file":"static/js/main.176cdff6.chunk.js","sourcesContent":["import {\n  // eslint-disable-next-line \n  Streamlit,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ComponentProps, useEffect } from \"react\"\nimport styled from '@emotion/styled'\nimport { css } from '@emotion/react'\nimport Typewriter from 'typewriter-effect'\n\n\n// custom callback to refresh streamlit on every character typed\nconst refreshStreamlitAndCreateNode = (character: string) => {\n  Streamlit.setFrameHeight();\n  return document.createTextNode(character)\n}\n\nconst MessageContainer = (props: ComponentProps<any>) => {\n  const { theme, value, animateFrom, useTypewriter, partialReplies } = props\n  const StyledDiv = styled.div({\n    display: 'inline-block',\n    background: theme.secondaryBackgroundColor,\n    border: '1px solid transparent',\n    borderRadius: '10px',\n    padding: '10px 14px',\n    margin: '5px 20px',\n    maxWidth: '70%',\n    whiteSpace: 'pre-wrap',\n  })\n  if (useTypewriter) {\n    return (\n      <StyledDiv>\n        <span>{animateFrom}</span>\n        <Typewriter\n          options={{\n            delay: 10,\n            cursor: 'â–Ž',\n            onCreateTextNode: refreshStreamlitAndCreateNode\n          }}\n          onInit={typewriter => {\n            typewriter\n              .typeString(\n                value.split(animateFrom).join('')\n              )\n              .callFunction(state => {\n                setTimeout(() => state.elements.cursor.setAttribute('hidden', 'hidden'), 3500)\n                if (partialReplies) {\n                  Streamlit.setComponentValue(false)\n                }\n              })\n              .start()\n          }}\n        >\n        </Typewriter>\n      </StyledDiv>\n    )\n  } else {\n    return (\n      <StyledDiv>\n        {value}\n      </StyledDiv>\n    )\n  }\n}\n\nconst Chat = (props: ComponentProps<any>) => {\n  useEffect(() => {\n      Streamlit.setFrameHeight()\n    }\n  );\n  const { isUser, avatarStyle, seed, animateFrom, value, useTypewriter, partialReplies } = props.args\n\n  let avatarUrl\n  if (avatarStyle.startsWith(\"https\")) {\n    avatarUrl = avatarStyle\n  } else if (avatarStyle.startsWith(\"data:image\")) {\n    avatarUrl = avatarStyle\n  } else {\n    avatarUrl = `https://avatars.dicebear.com/api/${avatarStyle}/${seed}.svg`\n  }\n\n  // Streamlit sends us a theme object via props that we can use to ensure\n  // that our component has visuals that match the active theme in a\n  // streamlit app.\n  const { theme } = props\n  // Maintain compatibility with older versions of Streamlit that don't send\n  // a theme object.\n  if (!theme) {\n    return <div>Theme is undefined, please check streamlit version.</div>\n  }\n\n  // styles for the avatar image\n  const Avatar = styled.img({\n    border: `1px solid transparent`,\n    // borderRadius: '50%',\n    height: '3rem',\n    width: '3rem',\n    margin: 0,\n  })\n\n  // styles for the container\n  const ChatContainer = styled.div({\n    display: 'flex',\n    // flexDirection: 'row',\n    fontFamily: `${theme.font}, 'Segoe UI', 'Roboto', sans-serif`, \n    height: 'auto',\n    margin: 0,\n    width: '100%'\n  }, \n  (props: {isUser: boolean}) => {  // specific styles\n    if (props.isUser){\n      return css`\n        flex-direction: row-reverse;\n        & > div {\n          text-align: right;\n        }\n        padding-right: 5px;\n      `\n    }\n    return css`\n      .Typewriter {\n        display: inline;\n      }\n    `\n  })\n  \n  // custom callback to refresh streamlit on every character typed\n  const refreshStreamlitAndCreateNode = (character: string) => {\n    Streamlit.setFrameHeight()\n    return document.createTextNode(character)\n  }\n  if (!isUser) {\n    return (\n      <ChatContainer isUser={isUser}>\n        <Avatar src={avatarUrl} alt=\"profile\" draggable=\"false\"/>\n        <MessageContainer theme={theme} value={value} animateFrom={animateFrom} useTypewriter={useTypewriter} partialReplies={partialReplies}>\n        </MessageContainer>\n      </ChatContainer>\n    )\n  } else {\n    return (\n      <ChatContainer isUser={isUser}>\n        <Avatar src={avatarUrl} alt=\"profile\" draggable=\"false\"/>\n        <MessageContainer theme={theme} value={value} animateFrom={animateFrom}>\n        </MessageContainer>\n      </ChatContainer>\n    )\n  }\n} \n\nexport default withStreamlitConnection(Chat);\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Chat from \"./stChat\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Chat />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}